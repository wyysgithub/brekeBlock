{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\gameMain.js"],"names":["level1","strengthenList","index","title","digest","icon","ballspeed","ballArea","ballAttach","cc","Class","extends","Component","properties","level","buffList","blockPrefab","default","type","Prefab","selectPrefab","onLoad","gameOverPage","find","waiting","levelBabel","getComponent","Label","successPage","ballNode","ballScript","levelBlockNode","baffleNode","baffleScript","restart","ballNum","gameStart","active","x","resetPosition","loadLevel","gameOver","passLevel","_this","setSpeed","string","radomStrengthen","strengList","createrSelect","y","info","newSelect","instantiate","addChild","loadSelect","setPosition","v2","num","callback","indexList","i","Math","floor","random","length","indexOf","push","levelInfo","map","value","yIndex","data","xIndex","createrBlock","newBlock","start"],"mappings":"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","file":"gameMain.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar level1 = [\r\n    // [0,0,0,0,0,0],\r\n    // [0,0,0,0,0,0],\r\n    // [0,0,0,0,0,0],\r\n    // [0,0,0,0,0,0],\r\n    // [0,0,0,0,0,1]\r\n    [1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 1, 1]\r\n];\r\nvar strengthenList = [\r\n    {index:1,title:'黄色闪光',digest:'球的速度增加100%',icon:0,ballspeed:1,ballArea:0,ballAttach:0},\r\n    {index:2,title:'肉弹战车',digest:'球的体积增加100%',icon:1,ballspeed:0,ballArea:1,ballAttach:0},\r\n    {index:3,title:'无砖能挡',digest:'球的伤害增加100%',icon:2,ballspeed:0,ballArea:0,ballAttach:1},\r\n    {index:4,title:'强壮',digest:'球的体积增加50%，伤害增加10%',icon:3,ballspeed:0,ballArea:0.5,ballAttach:0.1},\r\n    {index:5,title:'精练',digest:'球的速度增加50%，伤害增加10%',icon:4,ballspeed:0.5,ballArea:0,ballAttach:0.1}\r\n]\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        level: 1,\r\n        buffList:[],\r\n        blockPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        selectPrefab:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n        }\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameOverPage = cc.find(\"UI_ROOT/gameOver\");\r\n        // 开始游戏界面\r\n        this.waiting = cc.find(\"UI_ROOT/waiting\");\r\n        this.levelBabel = cc.find(\"UI_ROOT/waiting/level\").getComponent(cc.Label);\r\n\r\n        // 成功界面\r\n        this.successPage = cc.find(\"UI_ROOT/successPage\");\r\n\r\n        this.ballNode = cc.find(\"UI_ROOT/ball\");\r\n        this.ballScript = this.ballNode.getComponent(\"ball\");\r\n\r\n        this.levelBlockNode = cc.find(\"UI_ROOT/levelBlock\");\r\n\r\n        this.baffleNode = cc.find(\"UI_ROOT/baffle\");\r\n        this.baffleScript = this.baffleNode.getComponent(\"baffle\");\r\n    },\r\n    // 从头开始\r\n    restart() {\r\n\r\n        // 关卡置空\r\n        this.level = 1;\r\n        //球数\r\n        this.ballScript.ballNum = 3;\r\n        // buff\r\n        this.buffList = [];\r\n        //重玩 在开始游戏的基础上，清空所有buff、关卡、球数\r\n        this.gameStart()\r\n    },\r\n    // 继续游戏\r\n    gameStart() {\r\n        this.gameOverPage.active = false;\r\n        this.waiting.active = false;\r\n\r\n        this.ballNode.active = true;\r\n        //球和板的位置\r\n        this.baffleNode.x = 0;\r\n\r\n        this.ballScript.resetPosition()\r\n\r\n        this.loadLevel(this.level)\r\n    },\r\n    // 游戏结束\r\n    gameOver() {\r\n\r\n        this.gameOverPage.active = true;\r\n    },\r\n    // 通关函数\r\n    passLevel() {\r\n        var _this = this;\r\n        // 球 停止运动\r\n        this.ballScript.setSpeed(0);\r\n        // 关卡+1\r\n        this.level += 1;\r\n        this.levelBabel.string = '当前关卡：'+ this.level;\r\n        // 展示通关提示层\r\n        this.successPage.active = true;\r\n        // 生成随机强化列表 供选择\r\n        this.radomStrengthen(3,function (strengList) {\r\n            _this.createrSelect(-188,-193,strengList[0]);\r\n            _this.createrSelect(0,-193,strengList[1]);\r\n            _this.createrSelect(188,-193,strengList[2]);\r\n        });\r\n\r\n    },\r\n    //生成选择卡\r\n    createrSelect(x, y, info) {\r\n        var newSelect = cc.instantiate(this.selectPrefab);\r\n\r\n        // 将新增的节点添加到levelBlock节点下面  方便后续统计\r\n        this.successPage.addChild(newSelect);\r\n\r\n        newSelect.getComponent(\"select\").loadSelect(info)\r\n        // 设置位置\r\n        newSelect.setPosition(cc.v2(x, y));\r\n    },\r\n    // 生成随机强化列表\r\n    radomStrengthen(num,callback) {\r\n        var strengList = [];\r\n        var indexList = [];\r\n        for (var i = 0; i < num; i++){\r\n            var index = Math.floor(Math.random() * strengthenList.length)\r\n            if(indexList.indexOf(index) === -1){\r\n                indexList.push(index)\r\n                strengList.push(strengthenList[index])\r\n            }else {\r\n                i--;\r\n            }\r\n        };\r\n        callback(strengList);\r\n    }\r\n    ,\r\n\r\n\r\n// 加载关卡\r\n    loadLevel(level) {\r\n        var levelInfo = [];\r\n        var _this = this;\r\n        switch (level) {\r\n            case 1:\r\n                levelInfo = level1;\r\n                break;\r\n            default:\r\n                levelInfo = level1;\r\n                break;\r\n        }\r\n        levelInfo.map(function (value, yIndex) {\r\n            value.map(function (data, xIndex) {\r\n                if (data === 1) {\r\n                    _this.createrBlock(xIndex * 100 - 250, 555 - yIndex * 110)\r\n                }\r\n            })\r\n        })\r\n    }\r\n    ,\r\n//生成砖块（配合加载关卡使用）\r\n    createrBlock(x, y) {\r\n        var newBlock = cc.instantiate(this.blockPrefab);\r\n\r\n        // 将新增的节点添加到levelBlock节点下面  方便后续统计\r\n        this.levelBlockNode.addChild(newBlock);\r\n        // 设置位置\r\n        newBlock.setPosition(cc.v2(x, y));\r\n    }\r\n    ,\r\n    start() {\r\n\r\n    }\r\n    ,\r\n\r\n// update (dt) {},\r\n})\r\n;\r\n"]}