{"version":3,"sources":["gameMain.js"],"names":["level1","strengthenList","index","title","digest","icon","ballspeed","ballArea","ballAttach","cc","Class","extends","Component","properties","level","buffList","blockPrefab","default","type","Prefab","selectPrefab","onLoad","gameOverPage","find","waiting","successPage","ballNode","ballScript","getComponent","levelBlockNode","baffleNode","baffleScript","restart","ballNum","gameStart","active","x","resetPosition","loadLevel","gameOver","passLevel","setSpeed","radomStrengthen","strengList","console","log","num","callback","indexList","i","Math","floor","random","length","indexOf","push","levelInfo","_this","map","value","yIndex","data","xIndex","createrBlock","y","newBlock","instantiate","addChild","setPosition","v2","createrSelect","newSelect","node","start"],"mappings":"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","file":"gameMain.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar level1 = [\r\n    // [1, 1, 1, 1, 1, 1],\r\n    // [1, 1, 1, 1, 1, 1],\r\n];\r\nvar strengthenList = [\r\n    {index:1,title:'黄色闪光',digest:'球的速度增加500%',icon:'ball',ballspeed:5,ballArea:0,ballAttach:0},\r\n    {index:2,title:'肉弹战车',digest:'球的体积增加500%',icon:'ball',ballspeed:0,ballArea:5,ballAttach:0},\r\n    {index:3,title:'无砖能挡',digest:'球的伤害增加500%',icon:'ball',ballspeed:0,ballArea:0,ballAttach:5},\r\n    {index:4,title:'强壮',digest:'球的体积增加300%，伤害增加50%',icon:'ball',ballspeed:0,ballArea:3,ballAttach:0.5},\r\n    {index:5,title:'精练',digest:'球的速度增加300%，伤害增加100%',icon:'ball',ballspeed:3,ballArea:0,ballAttach:1}\r\n]\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        level: 1,\r\n        buffList:[],\r\n        blockPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        selectPrefab:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n        }\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.gameOverPage = cc.find(\"UI_ROOT/gameOver\");\r\n        // 开始游戏界面\r\n        this.waiting = cc.find(\"UI_ROOT/waiting\");\r\n\r\n        // 成功界面\r\n        this.successPage = cc.find(\"UI_ROOT/successPage\");\r\n\r\n        this.ballNode = cc.find(\"UI_ROOT/ball\");\r\n        this.ballScript = this.ballNode.getComponent(\"ball\");\r\n\r\n        this.levelBlockNode = cc.find(\"UI_ROOT/levelBlock\");\r\n\r\n        this.baffleNode = cc.find(\"UI_ROOT/baffle\");\r\n        this.baffleScript = this.baffleNode.getComponent(\"baffle\");\r\n    },\r\n    // 从头开始\r\n    restart() {\r\n\r\n        // 关卡置空\r\n        this.level = 1;\r\n        //球数\r\n        this.ballScript.ballNum = 3;\r\n        // buff\r\n        this.buffList = [];\r\n        //重玩 在开始游戏的基础上，清空所有buff、关卡、球数\r\n        this.gameStart()\r\n    },\r\n    // 继续游戏\r\n    gameStart() {\r\n        this.gameOverPage.active = false;\r\n        this.waiting.active = false;\r\n\r\n        this.ballNode.active = true;\r\n        //球和板的位置\r\n        this.baffleNode.x = 0;\r\n\r\n        this.ballScript.resetPosition()\r\n\r\n        this.loadLevel(this.level)\r\n    },\r\n    // 游戏结束\r\n    gameOver() {\r\n\r\n        this.gameOverPage.active = true;\r\n    },\r\n    // 通关函数\r\n    passLevel() {\r\n        // 球 停止运动\r\n        this.ballScript.setSpeed(0);\r\n        // 关卡+1\r\n        this.level += 1;\r\n        // 展示通关提示层\r\n        this.successPage.active = true;\r\n        // 生成随机强化列表 供选择\r\n        this.radomStrengthen(3,function (strengList) {\r\n            console.log(strengList)\r\n        });\r\n\r\n    },\r\n    // 生成随机强化列表\r\n    radomStrengthen(num,callback) {\r\n        var strengList = [];\r\n        var indexList = [];\r\n        for (var i = 0; i < num; i++){\r\n            debugger\r\n            var index = Math.floor(Math.random() * strengthenList.length)\r\n            if(indexList.indexOf(index) === -1){\r\n                indexList.push(index)\r\n                strengList.push(strengthenList[index])\r\n            }else {\r\n                i--;\r\n            }\r\n        };\r\n        callback(strengList);\r\n    }\r\n    ,\r\n\r\n// 加载关卡\r\n    loadLevel(level) {\r\n        var levelInfo = [];\r\n        var _this = this;\r\n        switch (level) {\r\n            case 1:\r\n                levelInfo = level1;\r\n                break;\r\n        }\r\n        levelInfo.map(function (value, yIndex) {\r\n            value.map(function (data, xIndex) {\r\n                if (data === 1) {\r\n                    _this.createrBlock(xIndex * 100 - 250, 555 - yIndex * 110)\r\n                }\r\n            })\r\n        })\r\n    }\r\n    ,\r\n//生成砖块（配合加载关卡使用）\r\n    createrBlock(x, y) {\r\n        var newBlock = cc.instantiate(this.blockPrefab);\r\n\r\n        // 将新增的节点添加到levelBlock节点下面  方便后续统计\r\n        this.levelBlockNode.addChild(newBlock);\r\n        // 设置位置\r\n        newBlock.setPosition(cc.v2(x, y));\r\n    }\r\n    ,\r\n\r\n\r\n    //生成选择卡\r\n    createrSelect(x, y) {\r\n        var newSelect = cc.instantiate(this.blockPrefab);\r\n\r\n        // 将新增的节点添加到levelBlock节点下面  方便后续统计\r\n        this.node.addChild(newBlock);\r\n        // 设置位置\r\n        newSelect.setPosition(cc.v2(x, y));\r\n    },\r\n    start() {\r\n\r\n    }\r\n    ,\r\n\r\n// update (dt) {},\r\n})\r\n;\r\n"]}